<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[Gulp 前端自动化工作流]]></title>
    <url>%2Fposts%2F48995743%2F</url>
    <content type="text"><![CDATA[初识 Gulp 是因为公司项目逐渐需要进行前后端分离，既然脱离了世界上最好的语言 PHP 后，也就没了 include 函数的支持，面临最大的问题就是页面 header 、 footer 等一些公用部分的代码要怎么在每个页面上引用，手动复制肯定不行。 在网上搜寻一番后，发现了 gulp-file-include 这个插件，后面的故事，就像每个热恋中的人一样，恨不得每天都和 Gulp 腻在一起。 经过半年的相处，也大概摸透了 Gulp 的一些习性，并根据工作上的流程，整理了一套公司内部的前端自动化部署的开发环境。 本文不是 Gulp 的使用介绍，关于 Gulp 入门，请自行学习。 gulp-automation少罗嗦，先看东西 如何使用安装首先将 gulp-automation 下载到本地，下载好后推荐使用 Yarn 安装 1$ yarn install 运行1$ gulp 成功运行后，会自动打开浏览器并访问 http://localhost:3000 页面 编写代码原始页面全部在 page 目录下编写。打开 page 目录会看到有一个 index.html 页面 123456789101112&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt; &lt;!-- 引用公用页面采用以下方式 --&gt; @@include('include/head.html')&lt;/head&gt;&lt;body&gt; &lt;h1&gt;Test Page !&lt;/h1&gt; &lt;div class="test-img"&gt;&lt;/div&gt; &lt;script src="@@webRoot/static/js/main.js" charset="utf-8"&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt; 可以看到，和正常写 HTML 代码没什么区别。对于公用代码的引用，通过这样语法进行引用 1@@include(&apos;&lt;页面地址&gt;&apos;) 这里其实就是用到了 gulp-file-include ，更多语法参数点 这里 查看！ 通过上面可得知，page/include/ 是用来存放公用部分的代码的。 这时候可能又会遇到一个问题，不是所有网站的页面都存放在根目录下的，可能会按照功能模块的不同，划分出不同的文件夹来存放不同的页面，比如我们经常会看到这样的链接： www.xxx.com/index.html www.xxx.com/news/detail.html?nid=2 www.xxx.com/product/info.html?pid=1 网站首页存放在根目录，新闻相关页面存放在 news 文件夹下，产品相关页面存放在 product 文件夹下。 这里我的做法是把所有模块都放到 page/module/ 目录下，打开目录就可以看到一个 banner 文件夹，你可以在这个目录下随意创建其它模块文件夹。 发布/打包发布 1$ gulp build 发布并打包 1$ gulp build --z 修改 package.json 里的 name 参数，可改变打包出来压缩包文件的命名 打包时使用了 gulp-tinypng-nokey 插件进行图片压缩，需要将图片上传到服务器压缩后再下载，请确保打包时网络畅通 参考 Gulp 中文网 Gulp探究折腾之路(I) gulp使用小结(一) 前端构建工具gulpjs的使用介绍及技巧 常用gulp插件介绍(一) 重构你的gulpfile]]></content>
      <categories>
        <category>开发工具</category>
      </categories>
      <tags>
        <tag>Gulp</tag>
        <tag>自动化</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[使用 Hexo 和 Github 快速搭建个人博客]]></title>
    <url>%2Fposts%2F15e2d21f%2F</url>
    <content type="text"><![CDATA[网上类似的教程一搜一大把，写得其实很详细。但对于初次接触的我来说，这是一次全新的体验。所以在经历了多次「安装——配置——部署——删除——再安装——」之后，大概弄懂了整个流程。正好也是博客的开篇文章，记录一下整个搭建流程，加深印象。 安装安装前提在安装前，先确保电脑上已经安装了 Node.js 和 Git 环境。 安装 Hexo1$ yarn global add hexo-cli 官方是使用 npm 进行安装，个人推荐使用 yarn 进行安装，关于 yarn 和 npm 优劣分析，可以参考这篇文章《Yarn vs npm: 你需要知道的一切》 建站初始化先新建一个 blog 文件夹，然后进入该文件夹运行： 1$ hexo init 初始化完成后， blog 文件夹的目录如下： 本地访问继续运行： 1$ hexo g &amp;&amp; hexo s 运行成功后会发现提示信息： Hexo is running at http://localhost:4000/. 这个时候访问 http://localhost:4000/ 就会发现网站已经建好了！ 常用命令以下 4 个是我在搭建过程中发现使用频率最高的 4 个命令，甚至我感觉只要会这 4 个命令就可以了。 generate 生成静态文件 1$ hexo generate server 启动服务器 1$ hexo server deploy 部署网站 1$ hexo deploy clean 清除缓存文件（db.json）和已生成的静态文件（public） 1$ hexo clean 更多命令和参数请看 这里 ！ 部署到 Github首先先到 Github 上新建一个仓库，仓库名的格式为： 1&lt;username&gt;.github.io 例如我的就是 hooray.github.io ，创建好后，复制仓库的 HTTPS 地址，打开 blog 根目录下的 _config.yml 文件，拖动到底部找到 deploy 配置，按照以下格式修改并保存： 123deploy: type: git repo: &lt;仓库地址&gt; 这个时候安装 hexo-deployer-git 自动部署发布工具 1$ yarn add hexo-deployer-git 安装完成后，就可以去发布了 1$ hexo clean &amp;&amp; hexo g &amp;&amp; hexo d 第一次发布会提示输入 Github 账号和密码： 稍微等待一会，会提示发布成功，然后在浏览器里测试访问 https://hooray.github.io ，大功告成！ 这时候打开仓库会发现 Hexo 其实是把 public 目录下生成好的静态页面和相关资源上传到了 master 分支下，但是本地博客的开发环境是没有上传到仓库里的，如果换一台电脑想继续写博客更新，这就没办法了。 要解决这个问题其实也很简单，可以单独再创建一个仓库，专门用于上传开发环境。但我的做法是创建一个分支，比如 hexo 分支，这个分支专门用来上传开发环境。 需要注意，通过 git clone 下来的 NexT 主题，需要手动删除隐藏的 .git 文件夹，不然 NexT 主题整个文件夹都不会被提交。 主题安装 NexT1$ git clone https://github.com/theme-next/hexo-theme-next themes/next 我安装的是 6.0.x 的 NexT ，但在 NexT 官网上提供的还是 5.1.x 的安装命令和文档，因为 6.0.x 和 5.1.x 的配置有所不同，建议第一次练习搭建还是使用 5.1.x ，熟悉配置文档后，再用 6.0.x 。 修改 _config.yml 文件里 theme 配置： 1theme: next 配置虽然我安装的是 6.0.x ，但大部分还是可以根据 NexT 主题配置 文档来修改，以下会介绍一些文档中没有提及的设置。 以下分别用： 站点配置 _config.yml 主题配置 themes/next/_config.yml 区分两个配置文件 设置网站语言打开 站点配置 找到 language 修改 1language: zh-CN 开启导航打开 主题配置 找到 menu ，将需要开启的导航前面的 # 删掉 123456789menu: home: / || home about: /about/ || user tags: /tags/ || tags categories: /categories/ || th archives: /archives/ || archive #schedule: /schedule/ || calendar #sitemap: /sitemap.xml || sitemap commonweal: /404.html || heartbeat 这个时候会发现网站上已经能看到导航了，但点击却提示找不到页面。 这时需要去新建对应的页面，比如新建 标签 页： 1$ hexo new page "tags" 新建好后会在 source/tags/index.md 看到刚新建的文件，在 Front-matter 区域增加一句： 1type: &quot;tags&quot; 其它导航页面操作一样。 增加评论模块在 NexT 官网上可以查到第三方评论系统的配置方法，我最终选择的是 Gitment 做为博客的评论系统，因为 Gitment 是一款基于 GitHub Issues 的评论系统，这样对于评论的管理完全可以在一个仓库里实现。 步骤如下： 首先点击 这里 注册一个新的 OAuth Application 。Homepage URL 和 Authorization callback URL 均填写博客地址就行 接着注册好后会得到 Client ID 和 Client Secret ，打开 主题配置 找到 gitment 对照着修改 123456789101112gitment: enable: true mint: true count: true lazy: false cleanly: true language: github_user: hooray github_repo: hooray.github.io client_id: xxxxxxxxxx client_secret: xxxxxxxxxx redirect_protocol: 最后就是发布页面，发布好后，访问页面并使用你的 GitHub 账号登录（请确保账号是上面 repo 的拥有者），点击初始化按钮。之后其他用户就可以在该页面发表评论了。 需要注意的是，Gitment 不支持链接里面有中文，不然初始化评论的时候会提示 Error: Validation Failed 。解决办法就是创建文章的时候，使用纯英文当文件名。 文章链接唯一化有时候可能需要修改一篇已经发布的文章的标题，或者是修改它的发布时间，这样就导致文章链接地址会变化，也就间接导致 Gitment 评论丢失。 解决这个问题需要安装 hexo-abbrlink 工具 1$ yarn add hexo-abbrlink 安装好后打开 站点配置 找到 permalink 修改 1permalink: posts/:abbrlink/ 并在增加如下代码 1234# abbrlink configabbrlink: alg: crc32 # 算法：crc16(default) and crc32 rep: hex # 进制：dec(default) and hex 配置好后重新发布就能看到效果。 个人强烈推荐安装这个工具，这样创建文章的时候可以继续使用中文名，如果博客里文章多了，还是中文一目了然，也方便管理，同时也解决了上面的问题，链接永久唯一化后对 SEO 会更友好。 参考 Hexo 文档 NexT 使用文档 搭建个人博客-hexo+github详细完整步骤 Gitment：使用 GitHub Issues 搭建评论系统 hexo的next主题个性化配置教程 为NexT主题添加文章阅读量统计功能 hexo 摸爬滚打之进阶教程]]></content>
      <categories>
        <category>开发工具</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>NexT</tag>
      </tags>
  </entry>
</search>
